<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>8. 開発者向け情報 &#8212; Mroonga v7.10 documentation</title>
    <link rel="stylesheet" href="static/mroonga.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '7.10',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="static/translations.js"></script>
    <link rel="shortcut icon" href="static/favicon.ico"/>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="next" title="8.1. デバッグ方法" href="developer/debug.html" />
    <link rel="prev" title="7.2. How to contribute in documentation topics" href="contribution/documentation.html" /> 
      <meta property="fb:page_id" content="238184682903165" /><!-- mroonga -->
    <meta property="fb:admins" content="664204556" /><!-- kouhei.sutou -->
    <meta property="og:type" content="product" />
    <meta property="og:image" content="http://mroonga.org/images/logos/mroonga-icon-full-size.png" />
    <meta property="og:site_name" content="mroonga" />

    <link rel="stylesheet" href="/css/sphinx.css" type="text/css" />
  </head>

    <body>
    <div id="fb-root"></div>

<div class="header">
  <h1 class="title">
    <a id="top-link" href="./../">
      <span class="project">mroonga</span>
      <span class="separator">-</span>
      <span class="description">MySQLで高速に全文検索するためのオープンソースのストレージエンジン</span>
    </a>
  </h1>

      <div class="facebook-buttons">
      <fb:like href="http://www.facebook.com/pages/mroonga/238184682903165"
               layout="standard"
               width="290"></fb:like>
    </div>
    <div class="other-language-links">

    <ul>
      <li><a href="../../docs/developer.html" title="English">English</a></li>
    </ul>
  </div>
</div>
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="developer/debug.html" title="8.1. デバッグ方法"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="contribution/documentation.html" title="7.2. How to contribute in documentation topics"
             accesskey="P">前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Mroonga v7.10 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="developer-s-guide">
<h1>8. 開発者向け情報<a class="headerlink" href="#developer-s-guide" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer/debug.html">8.1. デバッグ方法</a><ul>
<li class="toctree-l2"><a class="reference internal" href="developer/debug.html#building-for-debugging">8.1.1. デバッグ用ビルド方法</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/debug.html#more-about-run-sql-test-sh">8.1.2. run-sql-test.sh を使いこなす</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developer/release.html">8.2. リリース手順</a><ul>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id1">8.2.1. 前提条件</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id2">8.2.2. ビルド環境の準備</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#windows">8.2.3. Windows版パッケージのビルド環境準備</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id4">8.2.4. 変更点の記述</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#configure">8.2.5. configureスクリプトの生成</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id5">8.2.6. configureスクリプトの実行</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id6">8.2.7. アップロード権限の確認</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#make-update-latest-release">8.2.8. make update-latest-releaseの実行</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id7">8.2.9. リリースタグの設定</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id8">8.2.10. 配布用ファイルのアップロード</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id9">8.2.11. パッケージの作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id13">8.2.12. ドキュメントのアップロード</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#homebrew">8.2.13. Homebrewの更新</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id15">8.2.14. リリースメールの送信</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#twitter">8.2.15. Twitterでリリースアナウンスをする</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id16">8.2.16. リリース後にやること</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="how-we-are-developing">
<h2>8.3. 開発手法について<a class="headerlink" href="#how-we-are-developing" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Mroonga開発プロジェクトではBTSの1つであるRedmineを用いたチケット駆動開発を実施しています。</p>
<p>Redmineは以下のサイトで運用されています。</p>
<p><a class="reference external" href="http://redmine.groonga.org/projects/mroonga">http://redmine.groonga.org/projects/mroonga</a></p>
<p>開発の作業はチケット単位で行っています。</p>
<p>開発者の方は上記サイトへのアカウント登録をお願いします。</p>
</div>
<div class="section" id="roadmap">
<h2>8.4. ロードマップについて<a class="headerlink" href="#roadmap" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>We develop based on the roadmap, and you can see our roadmap in the following page.</p>
<p><a class="reference external" href="http://redmine.groonga.org/projects/mroonga/roadmap">http://redmine.groonga.org/projects/mroonga/roadmap</a></p>
<p>ロードマップはオフラインあるいはオンラインでの開発会議で検討を行った上で決定されます。</p>
<p>ロードマップは各バージョンごとに追加する機能の一覧として構成されています。</p>
</div>
<div class="section" id="source-code-management">
<h2>8.5. ソースコード管理について<a class="headerlink" href="#source-code-management" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>GitHubを使用したgitによるソースコード管理を行っています。</p>
<p><a class="reference external" href="http://github.com/mroonga/mroonga">http://github.com/mroonga/mroonga</a></p>
<p>上記レポジトリに対してread/writeでcloneを作成し、commitおよびpushして下さい。</p>
<p>アカウントを作成していない開発者の方はgithub.comへの登録をお願いします。</p>
</div>
<div class="section" id="development-process">
<h2>8.6. 開発環境<a class="headerlink" href="#development-process" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>開発は以下の流れで行いたいと考えています。</p>
<ol class="arabic simple">
<li>チケットの新規作成と内容の記述</li>
<li>開発会議での検討(ロードマップへの反映)</li>
<li>チケットの割り当て(担当者作業開始)</li>
<li>機能実装あるいはバグの修正作業、必要に応じてレポジトリへのpush</li>
<li>テストコードの追加と実行、レポジトリへのpush</li>
<li>実装/テスト内容に対するレビュー(必要に応じて4へ戻る)</li>
<li>ドキュメントの追加/変更、 レポジトリへのpush</li>
<li>チケットの完了</li>
</ol>
<p>機能追加や仕様変更などについても積極的にアイデアを募集します。まずはチケットを新規作成して内容を記述して下さい。</p>
<p>テストコードの追加と実行については後述しますのでそちらを参照して下さい。</p>
<p>基本的にチケットを担当されている方が設計、実装、テスト、ドキュメントまで一通りお願いしたいと考えています。</p>
<p>他の開発者にレビューを依頼し(特に機能追加の場合)、無事パスしたら最後にドキュメントを追加/変更してチケット完了となります。</p>
<p>ドキュメントの追加/変更方法についても詳しくは後述します。</p>
</div>
<div class="section" id="release">
<h2>8.7. リリースについて<a class="headerlink" href="#release" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>リリースはロードマップ上のチケットが全て完了となった段階で行います。</p>
<p>リリースにあたっては以下の作業を行っています。</p>
<ul class="simple">
<li>ソースパッケージ作成</li>
<li>バイナリパッケージ作成</li>
<li>ドキュメント(<a class="reference external" href="http://mroonga.org">http://mroonga.org</a>)のアップデート</li>
<li>リリースの告知</li>
</ul>
<p><a class="reference internal" href="developer/release.html"><span class="doc">リリース手順</span></a> へ移動予定。</p>
</div>
<div class="section" id="development-environment">
<h2>8.8. 開発環境<a class="headerlink" href="#development-environment" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>現在、以下のような開発環境を想定しています。</p>
<ul class="simple">
<li>Linux x86_64</li>
<li>glibc</li>
<li><a class="reference external" href="http://www.mysql.com/">MySQL</a></li>
<li><a class="reference external" href="http://groonga.org/">Groonga</a></li>
<li>Cutter &lt;<a class="reference external" href="http://cutter.sourceforge.net/">http://cutter.sourceforge.net/</a>&gt;`_ (C/C++単体テスト用)</li>
<li>Sphinx &lt;<a class="reference external" href="http://sphinx-doc.org/">http://sphinx-doc.org/</a>&gt;`_ (ドキュメント用)</li>
</ul>
</div>
<div class="section" id="contents-of-the-source-tree">
<h2>8.9. ソースディレクトリ解説<a class="headerlink" href="#contents-of-the-source-tree" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>今のところソースファイルの数はごくわずかです。なるべくシンプルな状態を維持したいと考えています。</p>
<dl class="docutils">
<dt>ha_mroonga.hpp</dt>
<dd>Mroongaのヘッダファイル</dd>
<dt>ha_mroonga.cpp</dt>
<dd>Mroongaの実装コード</dd>
<dt>mrnsys.hpp</dt>
<dd>ユーティリティ関数のヘッダファイル</dd>
<dt>mrnsys.cpp</dt>
<dd>ユーティリティ関数の実装コード</dd>
<dt>mysql-test/</dt>
<dd><p class="first">SQLによるテストコード用ディレクトリ</p>
<p>SQLによるテストコード用ディレクトリSQLテストスクリプト（現在実行可能なSQL文の定義も兼ねる）</p>
<p class="last">SQLテスト想定実行結果（SQL動作仕様定義も兼ねる）</p>
</dd>
<dt>test/unit/</dt>
<dd>C/C++関数単体でのテストコード用ディレクトリ</dd>
<dt>doc/source/</dt>
<dd>Sphinx形式の英語ドキュメント一式</dd>
</dl>
<p>Mroongaはまだ開発の立ち上げ段階であるため、SQL実行に関する仕様のドキュメント化は当面行いません。</p>
<p>その代わりとしてSQLテストスクリプトとその想定実行結果を機能一覧/仕様定義として見なしています。</p>
</div>
<div class="section" id="adding-and-running-tests">
<h2>8.10. テストコードの追加と実行について<a class="headerlink" href="#adding-and-running-tests" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Mroongaではプログラムの品質管理のため、2種類の回帰テストを用いています。</p>
<dl class="docutils">
<dt>SQL tests</dt>
<dd>SQL実行により動作確認を行えるような機能追加/バグ修正に関しては必ずSQLテストを追加して下さい。高速化機能などは一見するとSQLによる動作確認ができないように見える場合もありますが、ステータス変数やinformation_schemaプラグインなどを使用することで上手くテストできるものもあります。</dd>
<dt>C/C++単体テスト</dt>
<dd>Cutterを使用した関数レベルでの回帰テストです。ユーティリティ関数などSQL実行結果による動作の差異を確認できないような実装を追加した場合にはこちらにテストを追加して下さい。</dd>
</dl>
<p>ソースコードレポジトリへのpushを行う前に必ず回帰テストを実行し、デグレードが発生していないことを確認して下さい。</p>
<p>上記の回帰テストは&quot;make check&quot;で双方とも呼び出されます。</p>
<p>SQLテストはMySQLの回帰テストである&quot;mysql-test&quot;に対する&quot;sub test suite&quot;として実装しています。テストケースの追加や想定結果ファイルの改変方法などの詳細情報は以下のMySQLのドキュメントを参照して下さい。</p>
<p><a class="reference external" href="http://dev.mysql.com/doc/mysqltest/2.0/en/index.html">http://dev.mysql.com/doc/mysqltest/2.0/en/index.html</a></p>
<p>C/C++単体テストの書き方についてはCutterのドキュメントを参照して下さい。</p>
<p><a class="reference external" href="http://cutter.sourceforge.net/index.html.ja">http://cutter.sourceforge.net/index.html.ja</a></p>
</div>
<div class="section" id="adding-and-updating-documents">
<h2>8.11. ドキュメントの追加と変更について<a class="headerlink" href="#adding-and-updating-documents" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Mroongaではドキュメント作成にSphinxを使用しています。</p>
<p>Sphinx is a documentation generator which uses reStructuredText as its markup language, and converts reStructuredText files into HTML files.</p>
<p>reStructuredText uses .rst filename extensions.</p>
<p>ドキュメントはReStructuredText形式でソースファイルを書き、HTML形式などにビルドしています。</p>
<p>ドキュメントのソースファイルは&quot;doc/source&quot;ディレクトリにある拡張子が.rstのファイルです。</p>
<p>加筆修正を行ったら&quot;make html&quot;等でビルドして構文エラーが起きないことを確認して下さい。</p>
<p>ドキュメントの実際の公開場所は <a class="reference external" href="http://mroonga.org">http://mroonga.org</a> で、これはGitHubのサイト機能を使用しているため <a class="reference external" href="http://github.com/mroonga/mroonga.github.com">http://github.com/mroonga/mroonga.github.com</a> レポジトリに最新のHTML出力ファイルをpushすることで更新が行われる仕組みとなっていますが、mroonga.github.comレポジトリへのpushは現リリースバージョンとの整合性などを確認した上で別のタイミングでpushします。</p>
<p>We push added or updated HTML files to the repository after confirming the consistency between the documents and the current release version.</p>
<p>従って、各チケットに対するドキュメントのpushはmroongaレポジトリに対するpushのみで構いません。</p>
<p>The details are as follows.</p>
<div class="section" id="installing-sphinx">
<h3>8.11.1. Installing Sphinx<a class="headerlink" href="#installing-sphinx" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>You don't need to install Sphinx by yourself because Mroonga clones the latest Sphinx from Sphinx repository automatically. You just need to install Mercurial.</p>
</div>
<div class="section" id="build-mroonga">
<h3>8.11.2. Build Mroonga<a class="headerlink" href="#build-mroonga" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>In order to enables documentation generation, you should run configure script with &quot;--enable-document&quot; option as follows.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>% ./configure --enable-document --with-mysql-source=(your mysql source directory)
% make
% make install
</pre></div>
</div>
</div>
<div class="section" id="adding-a-document">
<h3>8.11.3. ドキュメントを追加<a class="headerlink" href="#adding-a-document" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>reStructuredText形式でドキュメントを書き、拡張子を.rstにして&quot;doc/source&quot;ディレクトリーに保存します。</p>
<p>See reStructuredText (reST) <a class="reference external" href="http://sphinx-doc.org/latest/rest.html">concepts and syntax</a> about how to write a document in reStructuredText format.</p>
</div>
<div class="section" id="confirm-generated-document">
<h3>8.11.4. Confirm generated document<a class="headerlink" href="#confirm-generated-document" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>You can generate HTML files by the following command.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>% cd doc/locale/en
% make html
</pre></div>
</div>
<p>You can confirm generated HTML document in web browser, after generating HTML files.</p>
<p>Here we show an example of using Firefox.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>% firefox html/characteristic.html
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">8. 開発者向け情報</a><ul>
<li><a class="reference internal" href="#how-we-are-developing">8.3. 開発手法について</a></li>
<li><a class="reference internal" href="#roadmap">8.4. ロードマップについて</a></li>
<li><a class="reference internal" href="#source-code-management">8.5. ソースコード管理について</a></li>
<li><a class="reference internal" href="#development-process">8.6. 開発環境</a></li>
<li><a class="reference internal" href="#release">8.7. リリースについて</a></li>
<li><a class="reference internal" href="#development-environment">8.8. 開発環境</a></li>
<li><a class="reference internal" href="#contents-of-the-source-tree">8.9. ソースディレクトリ解説</a></li>
<li><a class="reference internal" href="#adding-and-running-tests">8.10. テストコードの追加と実行について</a></li>
<li><a class="reference internal" href="#adding-and-updating-documents">8.11. ドキュメントの追加と変更について</a><ul>
<li><a class="reference internal" href="#installing-sphinx">8.11.1. Installing Sphinx</a></li>
<li><a class="reference internal" href="#build-mroonga">8.11.2. Build Mroonga</a></li>
<li><a class="reference internal" href="#adding-a-document">8.11.3. ドキュメントを追加</a></li>
<li><a class="reference internal" href="#confirm-generated-document">8.11.4. Confirm generated document</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="contribution/documentation.html"
                        title="前の章へ">7.2. How to contribute in documentation topics</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="developer/debug.html"
                        title="次の章へ">8.1. デバッグ方法</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="検索" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="developer/debug.html" title="8.1. デバッグ方法"
             >次へ</a> |</li>
        <li class="right" >
          <a href="contribution/documentation.html" title="7.2. How to contribute in documentation topics"
             >前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Mroonga v7.10 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-2017, Mroonga Project.
    </div>
      <script src="http://connect.facebook.net/ja_JP/all.js"></script>

    <script>
      FB.init({
         appId  : null,
         status : true, // check login status
         cookie : true, // enable cookies to allow the server to access the session
         xfbml  : true  // parse XFBML
      });
    </script>
  </body>

</html>